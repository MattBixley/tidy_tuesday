---
title: "Himalaya 22-09-2020"
author: "Matt Bixley"
date: "22/09/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidytuesdayR)
library(scales)
library(extrafont)
library(fishualize)
tt_data <- tt_load("2020-09-22")

theme_set(theme_light)
```

# Himalayan Peaks


## Data Inspection
Shows a list of 3 data sets, `peaks, members and expeditions`
```{r, eval = F}
tt_data %>% 
  glimpse()
```


## Everest Only
```{r everest}
exped <- tt_data$expeditions %>% 
  filter(peak_name == "Everest")

members <- tt_data$members %>% 
  filter(peak_name == "Everest") 
```

How popular is Everest, to climb.

```{r}
sum_exped <- exped %>%
  group_by(year) %>%
  # Capitalizing names so they'll look nice in the graph
  summarise(Expeditions = n(),
            Climbers = sum(members + hired_staff)) %>%
  ungroup() %>%
  # There are implicit zeros, especially before 1950
  # Use complete() to turn them into explicit zeros
  complete(year = 1920:2019,
           fill = list(Expeditions = 0, Climbers = 0)) %>%
  gather("category", "number", -year)

sum_exped %>%
  ggplot(aes(year, number, fill = year)) +
  geom_col() +
  facet_wrap( ~ category, scales = "free_y") +
  scale_x_continuous(breaks = seq(1920, 2020, 10)) +
  scale_y_continuous(labels = label_comma()) +
  scale_fill_fish(option = "Pseudocheilinus_tetrataenia",
                  direction = 1) +
  labs(
    title = "Everest's popularity has soared since the 1980s",
    caption = "Source: The Himalayan Database",
    x = "",
    y = ""
  ) +
  theme(
    legend.position = "none",
    text = element_text(family = "Bahnschrift"),
    panel.grid.minor = element_blank(),
    strip.text = element_text(size = 12, colour = "black"),
    strip.background = element_blank()
  )
```

